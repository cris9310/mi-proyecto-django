
{% load static %}

<div class="modal-dialog" role="document" >
  <div class="modal-content">
    <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel"><i id="iconos" style="padding-left: 3px" class="fa-regular fa-pen-to-square"></i> Actualizaci√≥n docente</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> 
        <span aria-hidden="true">&times;</span>
    </button>
    </div>
    <div class="modal-body">
      <form  method="POST" id="dataGeneralForm" action="{% url 'academico_app:update-teacher' object.pk %}">{% csrf_token %}
        <div id="errores" ></div>      
        {{form.as_p}}
        <div class="modal-footer">
        <button type="button" id="button" style="background-color: #405FC9; color: white; border: none" onclick="sendUser()" >Actualizar docente</button>
        <button type="button" class="btn btn-danger"  id="button" data-dismiss="modal">Cerrar</button>
        </div>
       </form>
    </div> 
  </div>
</div>

{% block js %}
<script type="text/javascript">

    $(document).ready(function() {
        $('#cedula').prop('readonly',true);
        
    });

  function sendUser() {
    var serializedData = $("#dataGeneralForm").serialize();
    if (serializedData) {

      var request = $.ajax({
        type: "POST",
        url: "{% url 'academico_app:update-teacher' object.pk %}",
        data: serializedData,
        success: function (response) {
          $("#edicion").modal("hide");
          window.location = "{% url 'academico_app:list-teacher' %}";
          mostrarOk();          
        },
        error: function (error) {
          mostrarErroresCreacion(error);
          mostrarError();
        }
      });
    } 
  }

</script>

{% endblock js %}